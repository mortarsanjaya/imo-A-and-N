\documentclass{article}

\usepackage{amsmath, amsfonts, amssymb, amsthm}
\usepackage{hyperref}

\setlength{\parindent}{0pt}
\setlength{\parskip}{5pt}

\newcommand{\R}{\mathbb{R}}

\newtheorem*{claim}{Claim}

\title{IMO 2014 C2}
\author{}
\date{}

\begin{document}

\maketitle



\subsection*{Problem}

Let $m$ be a positive integer, and let $S$ be the multiset consisting of $2^m$ copies of $1$.
Consider the following operation: take some two elements of $S$, say $a$ and $b$, and replace them with two copies of $a + b$.
Prove that, after $m 2^{m - 1}$ such operations, the sum of all elements of $S$ (including multiplicity) is at least $4^m$.



\subsection*{Solution}

Official solution: \url{https://www.imo-official.org/problems/IMO2014SL.pdf}

We present the official solution.
The idea is considering the product of elements in $S$ as opposed to the sum.
For any multiset $S$ of positive integers, we denote by $\sigma_S$ and $\pi_S$ the sum and product of all elements of $S$, respectively.

The main result is as follows.

\begin{claim}
Let $S$ be a multiset of positive integers with at least two elements.
Let $T$ be a multiset obtained by replacing two elements $a, b \in S$ with two occurrences of $a + b$.
Then $\pi_T \geq \pi_S$.
\end{claim}
\begin{proof}
This follows immediately from AM-GM: $(a + b)^2 \geq 4ab$.
\end{proof}

Initially, we have $\pi_S = 1$.
By the claim, if $T$ denotes the multiset obtained after $m 2^{m - 1}$ operations, $\pi_T \geq 4^{m 2^{m - 1}} = 2^{m 2^m}$.
By AM-GM, $\sigma_T \geq |T| \pi_T^{1/2^m}$.
But $|T| = 2^m$ and $\pi_T \geq 4^{m 2^m}$, so $\sigma_T \geq 2^m \cdot 2^m = 4^m$.



\subsection*{Implementation details}

We will use \texttt{nnreal}, i.e., the non-negative reals, to represent the elements of the multiset to be considered.
To implement the operations, define a relation between two multisets as needed in the claim.
We say that the pair $(S, T)$ of multisets of non-negative real numbers \emph{good} if there exists a multiset $R$ and $a, b \in \R_{\geq 0}$ such that $S = R + \{a, b\}$ and $T = R + \{a + b, a + b\}$.
This is equivalent to saying that there exists a valid operation from $S$ to $T$.



\end{document}
